# OAUTH2 란?

* OAUTH = Open + Authorization

OAUTH란 공개된 승인이라는 뜻인데, OAUTH2는 OAUTH의 2.0 버전을 의미하며, OAUTH1.0 버전을 대폭 개선했기 때문에 버전 1.0은 사용하지 않는 추세이다. 따라서 현재 OAUTH2가 인증에 있어 업계 표준 프로토콜로 사용되고 있다.

* OAUTH2는 권한에 대한 프레임워크이다.

OAUTH2는 인증을 하고, 권한을 부여하고, 그 권한으로 보호된 리소스에 접근하는 흐름을 정의한 프레임워크이다.<br/>
권한은 또한 위임될 수 있는데, 예를 들어 Facebook에서 사용자가 직접 로그인을 하는것이 아니라, 제 3의 다른 애플리케이션에서 Facebook으로부터 제한된 권한(예를 들어 사진만 볼 수 있는 권한)을 얻어서 사진 정보를 가져올 수 있다. 이때, 사용자의 권한이 그 애플리케이션으로 위임되어 사용되어질 수 있는 것이다.

* oauth2 사용에 대한 예제

<img src="images/oauth2 concept.JPG">

제일 왼쪽에 사용자가 있고, 가운데에 구글과 관계없는 타사의 모바일 앱이 있다.
사용자가 모바일 앱으로 본인의 구글 드라이브에 저장된 사진을 보려고 할 때,

1. 모바일 앱이 구글로부터 권한을 얻기 위해 구글의 로그인 화면을 띄운다.
2. 사용자는 로그인 창에서 아이디와 비밀번호를 입력한다. (구글에 직접 로그인하기 때문에 모바일 앱에선 아이디와 비밀번호를 알지 못한다.)
3. 사용자는 모바일 앱에서 본인의 구글 드라이브에 저장된 사진 리소스에 접근할 수 있도록 권한을 허용한다.
4. 구글에서 사진 리소스에 접근할 수 있는 토큰을 모바일 앱으로 발급한다.
5. 이제 모바일 앱은 구글에 저장된 사용자의 사진을 받아와서 활용할 수 있다.

<br/>

간단하게 흐름을 봤는데, 요점은 특정 리소스에 접근할 수 있는 권한을 안전하게 다른 애플리케이션으로 이양하고 사용할 수 있다는 것이다. 로그인은 구글에서 직접 하고 토큰을 발급해서 사용하기 때문에 계정 정보가 제 3자 애플리케이션에 남지 않게된다. 물론 토큰을 탈취당하면 위험해질 수 있지만, 토큰도 제한된 시간만 사용할 수 있다.